/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package Controlador;

import com.mysql.jdbc.PreparedStatement;
import java.awt.Desktop;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.util.Calendar;
import java.util.GregorianCalendar;
import javax.swing.JOptionPane;

/**
 *
 * @author kevin
 */
public class registrarventa  extends Conexion{
   public boolean registrarventa(int idv, int idp, String nombrec, String apc, String amc,int telefono, String colonia,
           int numero, String municipio, String estado, String fecha){
      PreparedStatement pst=null;
      try{
        String consulta="insert into venta values(?,?,?,?,?,?,?,?,?,?,?,?)";
          pst=(PreparedStatement) getconexionn().prepareStatement(consulta);
        
          
          pst.setInt(1,idv);
          pst.setInt(2, idp);
          pst.setString(3, nombrec);
          pst.setString(4, apc);
          pst.setString(5,amc);
          pst.setInt(6, telefono);
          pst.setString(7, colonia);
          pst.setInt(8, numero);
          pst.setString(9, municipio);
          pst.setString(10, estado);
          pst.setString(11, fecha);
          pst.setString(12,"0");
          
            
        
         
          if (pst.executeUpdate()==1) {
              return true;
          }  
      }catch(Exception e){
          System.out.println("error:"+e);
      }finally{
        try{
              if (getconexionn()!=null)getconexionn().close();
                if(pst!=null)pst.close();;
        }catch(Exception e){
            
        }
      }
      return false;
  }
     public void txtventa(int idv, int idp, String nombrec, String apc, String amc,int telefono, String colonia,
           int numero, String municipio, String estado, String fecha){
        
     try {
         
            
         
            try {
               
          
                 String ruta = "C:\\Users\\kevin\\OneDrive\\Escritorio\\venta/"+fecha+" -"+ idv+"-" +idp+" "+nombrec+ apc+amc+""+".txt";
            String contenido = "**** Agencia de coches****\n";
            
            File file = new File(ruta);
            // Si el archivo no existe es creado
            if (!file.exists()) {
                file.createNewFile();
            }
            FileWriter fw = new FileWriter(file);
            BufferedWriter bw = new BufferedWriter(fw);
            bw.write(contenido);
            bw.write("id vehiculo: "+idv+"\n");
            bw.write("id persona que atendio:"+idp+"\n");
            bw.write("fecha "+fecha+"\n\n");
            bw.write("cliente: "+nombrec+ apc+ amc+"\n\n");
            bw.write("Telefono: "+telefono+"\n\n");
            bw.write("Domicilio : "+colonia+numero+ municipio+ estado+"\n\n");
            
            
            bw.close(); 
               
               
            } catch (Exception e) {
            }
           // documento.close();
            java.awt.Desktop desktop = java.awt.Desktop.getDesktop();

java.io.File fichero = new java.io.File("C:\\Users\\kevin\\OneDrive\\Escritorio\\venta/"+fecha+" -"+ idv+"-" +idp+" "+nombrec+ apc+amc+""+".txt");
if (desktop.isSupported(Desktop.Action.PRINT)){
try {
desktop.print(fichero);
} catch (Exception e){
System.out.print("El sistema no permite imprimir usando la clase Desktop");
e.printStackTrace();
}
}else{
System.out.print("El sistema no permite imprimir usando la clase Desktop");
}
            JOptionPane.showMessageDialog(null, "Imprimiendo......");
            
        } catch (Exception e) {
        }
     }
     
}
